<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>你对TA是哪种喜欢心理测试</title>
<style>
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background: #fff7f2;
        color: #333;
    }
    .container {
        max-width: 480px;
        margin: 0 auto;
        padding: 20px;
    }
    h1, h2 {
        text-align: center;
        color: #ff6b81;
    }
    p {
        line-height: 1.6;
    }
    button {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 12px;
        background-color: #ff9fa8;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        color: #fff;
        cursor: pointer;
        transition: background 0.3s;
    }
    button:hover {
        background-color: #ff6b81;
    }
    .hidden {
        display: none;
    }
    .option-btn {
        background-color: #ffd1d9;
    }
    .option-btn.selected {
        background-color: #ff6b81;
    }
    .nav-btns {
        display: flex;
        justify-content: space-between;
    }
    .nav-btns button {
        width: 48%;
    }
    .result {
        background-color: #fff0f2;
        padding: 20px;
        border-radius: 12px;
        text-align: left;
    }
</style>
</head>
<body>
<div class="container">
    <!-- 首页 -->
    <div id="home">
        <h1>你对TA是哪种喜欢</h1>
        <p>从20个轻松日常场景里，看看你对Ta的喜欢，更像哪一种心理模式。</p>
        <ul>
            <li><strong>喜欢触发点：</strong>了解在什么样的细节和氛围里，你最容易对Ta产生好感。</li>
            <li><strong>理想相处模式：</strong>看看你更偏爱轻松松弛、暧昧拉扯，还是稳定踏实的相处节奏。</li>
            <li><strong>关系安全感来源：</strong>评估你是更依赖对方回应、相处氛围，还是自己的节奏与边界。</li>
            <li><strong>你对Ta的喜欢类型：</strong>最终会从8种喜欢方式中，为你匹配一种最贴近现状的类型说明。</li>
        </ul>
        <p><strong>隐私保护：</strong>本测评不会记录任何个人身份信息，结果仅自己可见。</p>
        <p><strong>心理学说明：</strong>题目与结果参考依恋理论、投射机制和吸引动机，仅供自我觉察与娱乐使用。</p>
        <button id="startBtn">点击开始测试</button>
    </div>

    <!-- 题目页面 -->
    <div id="quiz" class="hidden">
        <h2 id="questionTitle">问题</h2>
        <div id="options"></div>
        <div class="nav-btns">
            <button id="prevBtn">上一题</button>
            <button id="nextBtn">下一题</button>
        </div>
    </div>

    <!-- 结果页面 -->
    <div id="resultPage" class="hidden">
        <h2>测试结果</h2>
        <div class="result" id="resultContent"></div>
        <button id="restartBtn">重新测试</button>
    </div>
</div>

<script>
const questions = [
  {
    q: "1️⃣ 当 TA 很久没回你消息，你第一反应是？",
    options: ["A. 有点失落，但会忍住不去打扰","B. 会反复点开聊天框，看是不是自己哪里说错了","C. 心里不爽，觉得 TA 不够在意","D. 反而松一口气，觉得不用一直互动"]
  },
  {
    q: "2️⃣ TA 跟别人关系看起来很亲近时，你更接近哪种感受？",
    options: ["A. 会有点吃醋，但能自我消化","B. 心里慌，开始比较自己哪里不如对方","C. 明显不舒服，想确认自己在 TA 心里的位置","D. 理性告诉自己这很正常"]
  },
  // ... 这里省略 3-19 题，实际使用时补全所有20题
  {
    q: "20️⃣ 如果这段关系结束，你更可能？",
    options: ["A. 慢慢走出来","B. 很久放不下","C. 心有不甘","D. 理性接受"]
  }
];

const results = {
    A: {
        title: "稳定型喜欢",
        way: "成熟、温和、有耐心；爱得安静但真；不黏不作妖。",
        mechanism: "内心安全感相对稳定。",
        advice: "表达需求，别低估自己的价值。"
    },
    B: {
        title: "依附型喜欢",
        way: "情绪牵引型，容易上头，重视回应。",
        mechanism: "安全感依赖对方关注，容易焦虑。",
        advice: "把注意力从“TA怎么想”回到“自己想要什么”。"
    },
    C: {
        title: "控制型喜欢",
        way: "占有感强，重视位置感，易吃醋。",
        mechanism: "害怕自己在关系里“可有可无”。",
        advice: "少用试探，直接说需求，安全感不靠控制换。"
    },
    D: {
        title: "回避型喜欢",
        way: "理性克制，带距离感，不轻易暴露情绪。",
        mechanism: "习惯靠自己，亲密关系有点不安。",
        advice: "允许别人走近你，不必独自扛情绪。"
    }
};

let current = 0;
let answers = Array(questions.length).fill(null);

const home = document.getElementById("home");
const quiz = document.getElementById("quiz");
const resultPage = document.getElementById("resultPage");
const questionTitle = document.getElementById("questionTitle");
const optionsDiv = document.getElementById("options");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const resultContent = document.getElementById("resultContent");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");

function showQuestion(index){
    const q = questions[index];
    questionTitle.textContent = q.q;
    optionsDiv.innerHTML = "";
    q.options.forEach((opt, i)=>{
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className = "option-btn";
        if(answers[index] === i) btn.classList.add("selected");
        btn.onclick = ()=>{
            answers[index] = i;
            document.querySelectorAll(".option-btn").forEach(b=>b.classList.remove("selected"));
            btn.classList.add("selected");
        };
        optionsDiv.appendChild(btn);
    });

    prevBtn.style.display = index === 0 ? "none" : "inline-block";
    nextBtn.textContent = index === questions.length - 1 ? "查看答案" : "下一题";
}

function showResult(){
    // 检查是否有未作答
    const incomplete = answers.findIndex(a => a === null);
    if(incomplete !== -1){
        alert(`第 ${incomplete+1} 题还未作答，请完成后查看答案。`);
        current = incomplete;
        showQuestion(current);
        quiz.classList.remove("hidden");
        return;
    }

    // 统计选择最多的类型
    const counts = {A:0,B:0,C:0,D:0};
    answers.forEach(a=>{
        const key = ["A","B","C","D"][a];
        counts[key]++;
    });
    const maxType = Object.keys(counts).reduce((a,b)=>counts[a]>=counts[b]?a:b);
    const r = results[maxType];
    resultContent.innerHTML = `<h3>${r.title}</h3>
    <p><strong>喜欢方式：</strong>${r.way}</p>
    <p><strong>心理机制：</strong>${r.mechanism}</p>
    <p><strong>关系建议：</strong>${r.advice}</p>`;
    quiz.classList.add("hidden");
    resultPage.classList.remove("hidden");
}

startBtn.onclick = ()=>{
    home.classList.add("hidden");
    quiz.classList.remove("hidden");
    showQuestion(current);
};

prevBtn.onclick = ()=>{
    if(current>0){
        current--;
        showQuestion(current);
    }
};

nextBtn.onclick = ()=>{
    if(current < questions.length - 1){
        if(answers[current] === null){
            alert("请先选择一个答案！");
            return;
        }
        current++;
        showQuestion(current);
    } else {
        showResult();
    }
};

restartBtn.onclick = ()=>{
    current = 0;
    answers = Array(questions.length).fill(null);
    resultPage.classList.add("hidden");
    home.classList.remove("hidden");
};
</script>
</body>
</html>
